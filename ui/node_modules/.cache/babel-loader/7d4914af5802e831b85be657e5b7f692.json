{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\matth\\\\Documents\\\\Dev\\\\MarioMusic\\\\Mario-Music-MERN\\\\ui\\\\src\\\\components\\\\LoginForm.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useGlobal } from 'reactn';\nimport { Navigate, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LoginForm = () => {\n  _s();\n\n  const [logginLoad, setLogginLoad] = useGlobal(\"logginLoad\");\n  const [token, setToken] = useGlobal(\"token\");\n  const [user, setUser] = useGlobal(\"user\");\n  const [error, setError] = useState(\"\");\n  const [loggedIn, setloggedIn] = useState(false);\n  const [formState, setFormState] = useState({\n    username: \"\",\n    password: \"\"\n  });\n\n  const handleChange = e => {\n    setFormState({ ...formState,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const {\n        data\n      } = await axios.post(\"http://localhost:1337/auth/login\", formState);\n      console.log(data.user);\n      setUser(data.user);\n      setToken(data.token);\n      setloggedIn(true);\n    } catch (err) {\n      console.log(err);\n      setError(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loggedIn && /*#__PURE__*/_jsxDEV(Navigate, {\n      replace: true,\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"Username\",\n        onChange: handleChange,\n        value: formState.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        onChange: handleChange,\n        value: formState.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/signup\",\n        children: \"or signup\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(LoginForm, \"BqhmkSMeQCrTpjATLTUJ0r5TNEg=\", false, function () {\n  return [useGlobal, useGlobal, useGlobal];\n});\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["useState","useGlobal","Navigate","Link","axios","LoginForm","logginLoad","setLogginLoad","token","setToken","user","setUser","error","setError","loggedIn","setloggedIn","formState","setFormState","username","password","handleChange","e","target","name","value","handleSubmit","preventDefault","data","post","console","log","err"],"sources":["C:/Users/matth/Documents/Dev/MarioMusic/Mario-Music-MERN/ui/src/components/LoginForm.jsx"],"sourcesContent":["import { useState, useGlobal } from 'reactn'\r\nimport { Navigate, Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\n\r\nconst LoginForm = () => {\r\n    const [logginLoad, setLogginLoad] = useGlobal(\"logginLoad\")\r\n    const [token, setToken] = useGlobal(\"token\")\r\n    const [user, setUser] = useGlobal(\"user\")\r\n    const [error, setError ] = useState(\"\")\r\n    const [loggedIn, setloggedIn ] = useState(false)\r\n    const [formState, setFormState] = useState({\r\n        username: \"\",\r\n        password: \"\",\r\n    })\r\n\r\n    const handleChange = (e) => {\r\n        setFormState({\r\n            ...formState,\r\n            [e.target.name] : e.target.value,\r\n        })\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        try {\r\n            const { data } = await axios.post(\"http://localhost:1337/auth/login\", formState)\r\n            console.log(data.user)\r\n            setUser(data.user)\r\n            setToken(data.token)\r\n            setloggedIn(true)\r\n        }\r\n        catch (err){\r\n            console.log(err)\r\n            setError(err)\r\n        }\r\n    }\r\n\r\n    return(\r\n        <>\r\n        {loggedIn && <Navigate replace to=\"/\" />}\r\n            <form onSubmit={handleSubmit}>\r\n                <input \r\n                    type=\"text\" \r\n                    name=\"username\" \r\n                    placeholder=\"Username\" \r\n                    onChange={handleChange} \r\n                    value={formState.username} />\r\n                <input \r\n                    type=\"password\" \r\n                    name=\"password\" \r\n                    placeholder=\"Password\" \r\n                    onChange={handleChange} \r\n                    value={formState.password}/>\r\n                <button>Login</button>\r\n                <Link to=\"/signup\">or signup</Link>\r\n            </form>\r\n        </>\r\n    )\r\n\r\n}\r\n\r\n\r\nexport default LoginForm"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,QAApC;AACA,SAASC,QAAT,EAAmBC,IAAnB,QAA+B,kBAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;;AAGA,MAAMC,SAAS,GAAG,MAAM;EAAA;;EACpB,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BN,SAAS,CAAC,YAAD,CAA7C;EACA,MAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,SAAS,CAAC,OAAD,CAAnC;EACA,MAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBV,SAAS,CAAC,MAAD,CAAjC;EACA,MAAM,CAACW,KAAD,EAAQC,QAAR,IAAqBb,QAAQ,CAAC,EAAD,CAAnC;EACA,MAAM,CAACc,QAAD,EAAWC,WAAX,IAA2Bf,QAAQ,CAAC,KAAD,CAAzC;EACA,MAAM,CAACgB,SAAD,EAAYC,YAAZ,IAA4BjB,QAAQ,CAAC;IACvCkB,QAAQ,EAAE,EAD6B;IAEvCC,QAAQ,EAAE;EAF6B,CAAD,CAA1C;;EAKA,MAAMC,YAAY,GAAIC,CAAD,IAAO;IACxBJ,YAAY,CAAC,EACT,GAAGD,SADM;MAET,CAACK,CAAC,CAACC,MAAF,CAASC,IAAV,GAAkBF,CAAC,CAACC,MAAF,CAASE;IAFlB,CAAD,CAAZ;EAIH,CALD;;EAOA,MAAMC,YAAY,GAAG,MAAOJ,CAAP,IAAa;IAC9BA,CAAC,CAACK,cAAF;;IACA,IAAI;MACA,MAAM;QAAEC;MAAF,IAAW,MAAMvB,KAAK,CAACwB,IAAN,CAAW,kCAAX,EAA+CZ,SAA/C,CAAvB;MACAa,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACjB,IAAjB;MACAC,OAAO,CAACgB,IAAI,CAACjB,IAAN,CAAP;MACAD,QAAQ,CAACkB,IAAI,CAACnB,KAAN,CAAR;MACAO,WAAW,CAAC,IAAD,CAAX;IACH,CAND,CAOA,OAAOgB,GAAP,EAAW;MACPF,OAAO,CAACC,GAAR,CAAYC,GAAZ;MACAlB,QAAQ,CAACkB,GAAD,CAAR;IACH;EACJ,CAbD;;EAeA,oBACI;IAAA,WACCjB,QAAQ,iBAAI,QAAC,QAAD;MAAU,OAAO,MAAjB;MAAkB,EAAE,EAAC;IAArB;MAAA;MAAA;MAAA;IAAA,QADb,eAEI;MAAM,QAAQ,EAAEW,YAAhB;MAAA,wBACI;QACI,IAAI,EAAC,MADT;QAEI,IAAI,EAAC,UAFT;QAGI,WAAW,EAAC,UAHhB;QAII,QAAQ,EAAEL,YAJd;QAKI,KAAK,EAAEJ,SAAS,CAACE;MALrB;QAAA;QAAA;QAAA;MAAA,QADJ,eAOI;QACI,IAAI,EAAC,UADT;QAEI,IAAI,EAAC,UAFT;QAGI,WAAW,EAAC,UAHhB;QAII,QAAQ,EAAEE,YAJd;QAKI,KAAK,EAAEJ,SAAS,CAACG;MALrB;QAAA;QAAA;QAAA;MAAA,QAPJ,eAaI;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAbJ,eAcI,QAAC,IAAD;QAAM,EAAE,EAAC,SAAT;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAdJ;IAAA;MAAA;MAAA;MAAA;IAAA,QAFJ;EAAA,gBADJ;AAsBH,CAvDD;;GAAMd,S;UACkCJ,S,EACVA,S,EACFA,S;;;KAHtBI,S;AA0DN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}